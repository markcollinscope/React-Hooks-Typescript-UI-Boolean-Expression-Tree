{"ast":null,"code":"import _defineProperty from\"/home/mark/GIT/exp-tree/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";var _expFactory;// React Component: ExpView. \n// visual representation of boolean expressions - done in such a way as to enable \n// the dynamic construction of complex nested expressions (and, or, not ...), \n// to an arbitrary depth, including allowing undefined elements and the use of boolean constants.\n// provides the UI side of Exp.ts - recursively displaying and enabling the modification \n// at any point in the expressions hierarchy.\nimport{assert}from'./utils';import{ExpNodePartView}from'./ExpNodePartView';// boolean expressions - types(classes), Exp constants, operator values (also constants) and T, F, U values.\nimport{NotExp,AndExp,OrExp,NandExp,NorExp,XorExp,XOR_OP,NAND_OP,NOR_OP,UNDEF_EXP,TRUE_EXP,FALSE_EXP,NOT_OP,AND_OP,OR_OP,UNDEF,TRUE,FALSE}from'./Exp';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var displayUniExp=function displayUniExp(expv,updateAppCalculations){var e=expv;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"lhs-indent\",children:/*#__PURE__*/_jsx(ExpView,{exp:e.getSubExp(),parentUpdateCb:e.setSubExp,requestAppStateBeUpdatedCb:updateAppCalculations})})]});};export var displayBinExp=function displayBinExp(expv,updateAppCalculations){var e=expv;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"lhs-indent\",children:/*#__PURE__*/_jsx(ExpView,{exp:e.getLhsExp(),parentUpdateCb:e.setLhsExp,requestAppStateBeUpdatedCb:updateAppCalculations})}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"lhs-indent\",children:/*#__PURE__*/_jsx(ExpView,{exp:e.getRhsExp(),parentUpdateCb:e.setRhsExp,requestAppStateBeUpdatedCb:updateAppCalculations})})]});};export var displayNoSubExp=function displayNoSubExp(e,updateAppCalculations){return/*#__PURE__*/_jsx(\"p\",{});};// exported to enable module extension externally.\nvar expFactory=(_expFactory={},_defineProperty(_expFactory,UNDEF,{exp:function exp(){return UNDEF_EXP;},display:displayNoSubExp}),_defineProperty(_expFactory,TRUE,{exp:function exp(){return TRUE_EXP;},display:displayNoSubExp}),_defineProperty(_expFactory,FALSE,{exp:function exp(){return FALSE_EXP;},display:displayNoSubExp}),_defineProperty(_expFactory,NOT_OP,{exp:function exp(){return new NotExp();},display:displayUniExp}),_defineProperty(_expFactory,AND_OP,{exp:function exp(){return new AndExp();},display:displayBinExp}),_defineProperty(_expFactory,OR_OP,{exp:function exp(){return new OrExp();},display:displayBinExp}),_defineProperty(_expFactory,NAND_OP,{exp:function exp(){return new NandExp();},display:displayBinExp}),_defineProperty(_expFactory,NOR_OP,{exp:function exp(){return new NorExp();},display:displayBinExp}),_defineProperty(_expFactory,XOR_OP,{exp:function exp(){return new XorExp();},display:displayBinExp}),_expFactory);;export function ExpView(props){console.log(\"ExpView Fn Render, props.exp: \".concat(props.exp.name()));var handleSelectionFromDropDownMenu=function handleSelectionFromDropDownMenu(value){var e=expFactory[value].exp();props.parentUpdateCb(e);console.log(\"ExpView updated parent with: \".concat(e.name()));props.requestAppStateBeUpdatedCb();// React *cannot* do this automatically!\n};var viewToDisplay=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bdr md-font exp-width\",children:/*#__PURE__*/_jsx(ExpNodePartView,{options:Object.keys(expFactory),onSelect:handleSelectionFromDropDownMenu,selected:props.exp.name()})}),/*#__PURE__*/_jsx(\"div\",{}),expFactory[props.exp.name()].display(props.exp,props.requestAppStateBeUpdatedCb)]});return viewToDisplay;}// enable extension of module externally.\nexport function extendExpFactory(name,behaviour){assert(expFactory[name]===undefined);// pre-conditions check.\nexpFactory[name]=behaviour;}","map":{"version":3,"names":["assert","ExpNodePartView","NotExp","AndExp","OrExp","NandExp","NorExp","XorExp","XOR_OP","NAND_OP","NOR_OP","UNDEF_EXP","TRUE_EXP","FALSE_EXP","NOT_OP","AND_OP","OR_OP","UNDEF","TRUE","FALSE","displayUniExp","expv","updateAppCalculations","e","getSubExp","setSubExp","displayBinExp","getLhsExp","setLhsExp","getRhsExp","setRhsExp","displayNoSubExp","expFactory","exp","display","ExpView","props","console","log","name","handleSelectionFromDropDownMenu","value","parentUpdateCb","requestAppStateBeUpdatedCb","viewToDisplay","Object","keys","extendExpFactory","behaviour","undefined"],"sources":["/home/mark/GIT/exp-tree/src/ExpView.tsx"],"sourcesContent":["// React Component: ExpView. \n\n// visual representation of boolean expressions - done in such a way as to enable \n// the dynamic construction of complex nested expressions (and, or, not ...), \n// to an arbitrary depth, including allowing undefined elements and the use of boolean constants.\n\n// provides the UI side of Exp.ts - recursively displaying and enabling the modification \n// at any point in the expressions hierarchy.\n\nimport { assert } from './utils';\nimport { ExpNodePartView } from './ExpNodePartView';\n\n// boolean expressions - types(classes), Exp constants, operator values (also constants) and T, F, U values.\nimport { \n\tExp, BinExp, NotExp, AndExp, OrExp, NandExp, NorExp, XorExp, XOR_OP, NAND_OP, NOR_OP, UNDEF_EXP, TRUE_EXP, \n\tFALSE_EXP, NOT_OP, AND_OP, OR_OP, UNDEF, TRUE, FALSE\n} from './Exp';\n\nexport const displayUniExp = (expv: Exp, updateAppCalculations: () => void): JSX.Element => {\n\tlet e = expv as NotExp;\n\treturn (\n\t\t<div>\n\t\t\t<div />\n\t\t\t<div className='lhs-indent'>\n\t\t\t\t<ExpView\n\t\t\t\t\texp={e.getSubExp()}\n\t\t\t\t\tparentUpdateCb={e.setSubExp}\n\t\t\t\t\trequestAppStateBeUpdatedCb={updateAppCalculations}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport const displayBinExp = (expv: Exp, updateAppCalculations: () => void): JSX.Element => {\n\tlet e = expv as BinExp;\n\treturn (\n\t\t<div>\n\t\t\t<div className='lhs-indent'>\n\t\t\t\t<ExpView\n\t\t\t\t\texp={e.getLhsExp()}\n\t\t\t\t\tparentUpdateCb={e.setLhsExp}\n\t\t\t\t\trequestAppStateBeUpdatedCb={updateAppCalculations}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div />\n\t\t\t<div className='lhs-indent'>\n\t\t\t\t<ExpView\n\t\t\t\t\texp={e.getRhsExp()}\n\t\t\t\t\tparentUpdateCb={e.setRhsExp}\n\t\t\t\t\trequestAppStateBeUpdatedCb={updateAppCalculations}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport const displayNoSubExp = (e: Exp, updateAppCalculations: () => void): JSX.Element => {\n\treturn <p></p>;\n}\n\n// exported to enable module extension externally.\nexport type ExpNameSpecificBehaviour = { exp: () => Exp, display: (e: Exp, appCalc: () => void) => JSX.Element };\ntype ExpNameToBehaviourMap = { [index: string]: ExpNameSpecificBehaviour };\n\nconst expFactory = {\n\t[UNDEF]: \t\t{ exp: () => UNDEF_EXP, \tdisplay: displayNoSubExp },\n\t[TRUE]: \t\t{ exp: () => TRUE_EXP, \t\tdisplay: displayNoSubExp },\n\t[FALSE]: \t\t{ exp: () => FALSE_EXP, \tdisplay: displayNoSubExp },\n\t[NOT_OP]: \t\t{ exp: () => new NotExp(), \tdisplay: displayUniExp },\n\t[AND_OP]: \t\t{ exp: () => new AndExp(), \tdisplay: displayBinExp },\n\t[OR_OP]: \t\t{ exp: () => new OrExp(), \tdisplay: displayBinExp },\n\t[NAND_OP]: \t\t{ exp: () => new NandExp(), display: displayBinExp },\n\t[NOR_OP]: \t\t{ exp: () => new NorExp(), \tdisplay: displayBinExp },\n\t[XOR_OP]: \t\t{ exp: () => new XorExp(), \tdisplay: displayBinExp }\n} as ExpNameToBehaviourMap;\n\ninterface Props {\n\t// as shown in 'this' instance of ExpView.\n\texp: \t\t\t\t\t\tExp;\n\tparentUpdateCb: \t\t\t(e: Exp) => Exp;\n\trequestAppStateBeUpdatedCb: () => void;\n};\n\nexport function ExpView(props: Props) {\n\tconsole.log(`ExpView Fn Render, props.exp: ${props.exp.name()}`)\n\n\tconst handleSelectionFromDropDownMenu = (value: string) => {\n\t\tconst e = expFactory[value].exp();\n\t\tprops.parentUpdateCb(e);\n\t\tconsole.log(`ExpView updated parent with: ${e.name()}`)\n\t\tprops.requestAppStateBeUpdatedCb(); // React *cannot* do this automatically!\n\t}\n\n\tconst viewToDisplay = \n\t\t<div>\n\t\t\t<div className='bdr md-font exp-width'>\n\t\t\t\t<ExpNodePartView \n\t\t\t\t\toptions=\t{ Object.keys(expFactory) }\n\t\t\t\t\tonSelect=\t{ handleSelectionFromDropDownMenu }\n\t\t\t\t\tselected=\t{ props.exp.name() }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div/>\n\t\t\t{expFactory[props.exp.name()].display(props.exp, props.requestAppStateBeUpdatedCb)}\n\t\t</div>\n\n\treturn viewToDisplay;\n}\n\n// enable extension of module externally.\nexport function extendExpFactory( name: string, behaviour: ExpNameSpecificBehaviour )\n{\n\tassert(expFactory[name] === undefined);\t// pre-conditions check.\n\texpFactory[name] = behaviour;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}